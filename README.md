# koa2-wechat

基于koa2 使用co-wechat与co-wechat-api 快速搭建微信公众号
下载项目 && cd koa2-wechat && npm install

# 使用ngrok进行外网映射

进行公众号开发是需要腾讯微信服务器能够访问到我们的服务器，所以要进行映射，推荐 ngrok，好用！<br>
https://ngrok.com/ 进行注册<br>
下载相应版本的客户端，根据网站提示一步一步来就可以了 <br>
进入目录后使用命令行 ./ngrok http 8080  打开映射 （端口号与项目中的保持一致即可） <br>

# 微信公众平台接口测试帐号申请

登录到测试帐号，将appid和appsecret配置到config.js中，填写配置的token(自定义)填写到测试帐号<br>
运行项目 node server.js<br>
将ngrok映射的外网地址配置到测试帐号，点击配置<br>

# 小结

微信公众号的工作原理可以简单理解成，用户微信 <--> 腾讯微信公众号服务器 <--> 我们的服务器，三方间的数据传递。上面的步骤就是在完成我们的服务器与腾讯服务器间通信，其中appid,appsecret,token,服务器url即是配置参数。<br>
在这之后腾讯服务器在接收到用户的信息后，之后再将信息转发给我们的服务器进行业务处理，再通过腾讯服务器返回给用户。理解了这个思路，就可以很容易的完成微信公众号的搭建，项目中只是简单完成了自动回复/自定义菜单/模板消息的搭建，注释也很清楚，其他就需要借助腾讯的文档进行学习了，希望可以帮到大家！